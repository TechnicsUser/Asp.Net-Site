@using WebApplication9.Models
@model IEnumerable<WebApplication9.Models.Comments>


<hr />
@for(int i = 0; i < Model.Count(); i++) {

    @*@Html.Partial("_DisplayCommentPartial", new DisplayCommentViewModal(Model.ElementAt(i)))*@

    <hr />
    }

<table class="table">
    <tr>

        <th>
            @Html.DisplayNameFor(model => model.CreatedOn)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UserId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CommentOn)
        </th>


        <th>
            @Html.DisplayNameFor(model => model.CommentText)
        </th>


        <th>
            @Html.DisplayNameFor(model => model.Reports)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Likes)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DisLikes)
        </th>
        <th></th>
    </tr>

    @foreach(var item in Model) {
        <tr>

            <td>
                @Html.DisplayFor(modelItem => item.CreatedOn)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UserId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CommentOn)
                <br />

                @if(item.UserPhoto != null) {
                    var base64 = Convert.ToBase64String(item.UserPhoto);
                    var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

                    <img src="@imgSrc" style="width: 20%;" />
                    }
                else {
                    <br />
                    }
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.CommentText)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Reports)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Likes)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DisLikes)
            </td>
            <td>
                @*@Html.ActionLink("Edit", "Edit", new { id=item.CommentId }) |*@
                @Html.ActionLink("Details", "Details", new { id = item.CommentId }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.CommentId })
            </td>
        </tr>
        }

</table>
